{
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "A simple bar chart with embedded data.",
    "title": {
        "text": "America's annual university rankings",
        "fontSize": 30,
        "color": "#3e4149"
    },
    "width": 1600,
    "height": 600,
    "data": {
        "url": "https://raw.githubusercontent.com/shengquanluo/FIT3179/main/DATA%20VISUALISATION%202/cwurData.csv"
    },
    "selection": {
        "year_select": {
            "type": "single",
            "fields": [
                "year",
                "country"
            ],
            "init": {
                "year": "2015",
                "country": "United States of America"
            },
            "bind": {
                "year": {
                    "input": "select",
                    "options": [
                        "2012",
                        "2013",
                        "2014",
                        "2015"
                     
                    ]
                },
                "country": {
                    "input": "select",
                    "options": [
                        "United States of America"
                    ]
                }
            }
        }
    },
    "transform": [
        {
            "filter": {
                "selection": "year_select"
            }
        },
        {
            "filter": "datum.world_rank<=100"
        }
    ],
    "mark": {
        "type": "bar",
        "tooltip": true,
        "cornerRadiusEnd": 5,
        "binSpacing": 0.5
    },
    "encoding": {
        "x": {
            "field": "institution",
            "type": "nominal",
            "sort": {
                "order": "descending"
            }
        },
        "y": {
            "field": "score",
            "type": "quantitative"
        },
        "fill": {
            "field": "score",
            "scale": {
                "type": "linear",
                "domain": [
                    50,100
                ],
                "scheme": "blues"
            }
        }
    }
}